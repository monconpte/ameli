function openInfoDroitInva(){if($("ouvreDroit").hasClass("hidden")){chevronMasquer($("chevronInfoDroitInva"));effect.tweenShowInline($("ouvreDroit"));if(!$("peutOuvrirDroit").hasClass("hidden")){effect.tweenHide($("peutOuvrirDroit"));chevronAfficher($("chevronInfoPossibleDroitInva"))}$("popupPrerequisInva").style.height="700px"}else{chevronAfficher($("chevronInfoDroitInva"));effect.tweenHide($("ouvreDroit"));$("popupPrerequisInva").style.height="500px"}}function openInfoPossibleDroitInva(){if($("peutOuvrirDroit").hasClass("hidden")){chevronMasquer($("chevronInfoPossibleDroitInva"));effect.tweenShowInline($("peutOuvrirDroit"));if(!$("ouvreDroit").hasClass("hidden")){effect.tweenHide($("ouvreDroit"));chevronAfficher($("chevronInfoDroitInva"))}$("popupPrerequisInva").style.height="610px"}else{chevronAfficher($("chevronInfoPossibleDroitInva"));effect.tweenHide($("peutOuvrirDroit"));$("popupPrerequisInva").style.height="500px"}}function openNonConvoque(){if($("nonConvoque").hasClass("hidden")){chevronMasquer($("chevronNonConvoque"));effect.tweenShowInline($("nonConvoque"));if(!$("medecinVu").hasClass("hidden")){effect.tweenHide($("medecinVu"));chevronAfficher($("chevronConvoque"))}$("popupPrerequisInvaEtape").style.height="680px"}else{chevronAfficher($("chevronNonConvoque"));effect.tweenHide($("nonConvoque"));$("popupPrerequisInvaEtape").style.height="500px"}}function openMedecinVu(){if($("medecinVu").hasClass("hidden")){chevronMasquer($("chevronConvoque"));effect.tweenShowInline($("medecinVu"));if(!$("nonConvoque").hasClass("hidden")){effect.tweenHide($("nonConvoque"));chevronAfficher($("chevronNonConvoque"))}$("popupPrerequisInvaEtape").style.height="615px"}else{chevronAfficher($("chevronConvoque"));effect.tweenHide($("medecinVu"));$("popupPrerequisInvaEtape").style.height="500px"}}function chevronAfficher(a){a.style.transform="rotate(0deg)";a.setAttribute("alt",popinChevronAfficher);a.setAttribute("title",popinChevronAfficher)}function chevronMasquer(a){a.style.transform="rotate(180deg)";a.setAttribute("alt",popinChevronMasquer);a.setAttribute("title",popinChevronMasquer)}function updateErrorStatus(d,b,a,c){if(c){d.removeClass("field_error");effect.tweenHide(b);b.textContent=""}else{d.addClass("field_error");if(b.hasClass("hidden")){b.textContent=a;effect.tweenShow(b)}}}function showHideTitreSejour(){if($(pcDpil+"idNationalites").options[$(pcDpil+"idNationalites").selectedIndex].value===autreValue&&$(pcDpil+"idTitreSejourBlock").hasClass("hidden")){effect.tweenShow($(pcDpil+"idTitreSejourBlock"))}else{effect.tweenHide($(pcDpil+"idTitreSejourBlock"))}}function addRequiredToNationalitesSelect(){$(pcDpil+"idNationalites").setAttribute("aria-required",true)}function updateCoordonneesContinuerBtnStatus(){$(pcDpil+"idCoordonneesContinuerBtn").disabled=!isCoordoneesPageValid()}function isCoordoneesPageValid(){if($(pcDpil+"idNationalites").options[$(pcDpil+"idNationalites").selectedIndex].label===nationalitePlaceholder){return false}if($(pcDpil+"idNationalites").options[$(pcDpil+"idNationalites").selectedIndex].value===autreValue){return isTitreSejourValid()}return true}function isTitreSejourValid(){return $(pcDpil+"idTitreSejour").value.trim().length===0||$(pcDpil+"idTitreSejour").value.match(/^[f|F][0-9]{9}|[0-9]{10}/)}function isNotChampVide(a){return a.value.trim().length>0}function isTailleChampOK(b,a){return b.value.trim().length<=a}function validateTailleMinMaxChampTexte(d,c,b){var a;if(!isNotChampVide(d)){a=erreurChampVideMsg}else{if(!isTailleChampOK(d,b)){a=erreurTailleMaxMsg}}updateErrorStatus(d,c,a,a===undefined)}function openActiviteSalariee(){var a=$(pcDpil+"activiteSalariee").checked;if(a){effect.tweenShowInline($("idActiviteSalarie"));if($("idMentionObligatoire").hasClass("hidden")){effect.tweenShowInline($("idMentionObligatoire"))}}else{effect.tweenHide($("idActiviteSalarie"));if(!$(pcDpil+"precision").checked&&!$(pcDpil+"activiteNonSalariee").checked){effect.tweenHide($("idMentionObligatoire"))}}}function openAutreActiviteSalariee(){var a=nbMaxEmployeur;for(i=1;i<=a;i++){if($("idEmployeur"+i).hasClass("hidden")){effect.tweenShowInline($("idEmployeur"+i));$("idDivAjoutActivitee"+(i-1)).addClass("hidden");if(i==a){$("idDivAjoutActivitee"+i).addClass("hidden")}break}}}function afficheBtnAjouterActivite(){for(i=0;i<=nbMaxEmployeur;i++){if(i==nbMaxEmployeur){$("idDivAjoutActivitee"+i).addClass("hidden")}else{if(!$("idEmployeur"+i).hasClass("hidden")&&!$("idEmployeur"+(i+1)).hasClass("hidden")){$("idDivAjoutActivitee"+i).addClass("hidden")}}}}function closeAutreActiviteSalariee(b){var a=b;var d=nbMaxEmployeur;var c=0;for(j=1;j<=d;j++){if(!$("idEmployeur"+j).hasClass("hidden")){c++}}while(b<=c){if(b!==c){$(pcDpil+"idNomEmployeur"+b).value=$(pcDpil+"idNomEmployeur"+(b+1)).value;$(pcDpil+"idAdresse"+b).value=$(pcDpil+"idAdresse"+(b+1)).value;$(pcDpil+"idDateActiviteDebut"+b).value=$(pcDpil+"idDateActiviteDebut"+(b+1)).value;$(pcDpil+"idDateActiviteFin"+b).value=$(pcDpil+"idDateActiviteFin"+(b+1)).value}else{$(pcDpil+"idNomEmployeur"+b).value="";$(pcDpil+"idAdresse"+b).value="";$(pcDpil+"idDateActiviteDebut"+b).value="";$(pcDpil+"idDateActiviteFin"+b).value="";effect.tweenHide($("idEmployeur"+b));$("idDivAjoutActivitee"+(b-1)).removeClass("hidden")}b++}}function openPrecision(){var a=$(pcDpil+"precision").checked;if(a){effect.tweenShowInline($("idPrecision"));if($("idMentionObligatoire").hasClass("hidden")){effect.tweenShowInline($("idMentionObligatoire"))}}else{effect.tweenHide($("idPrecision"));if(!$(pcDpil+"activiteSalariee").checked&&!$(pcDpil+"activiteNonSalariee").checked){effect.tweenHide($("idMentionObligatoire"))}}}function openActiviteNonSalariee(){var a=$(pcDpil+"activiteNonSalariee").checked;if(a){effect.tweenShowInline($("idActiviteNonSalarie"));if($("idMentionObligatoire").hasClass("hidden")){effect.tweenShowInline($("idMentionObligatoire"))}}else{effect.tweenHide($("idActiviteNonSalarie"));if(!$(pcDpil+"precision").checked&&!$(pcDpil+"activiteSalariee").checked){effect.tweenHide($("idMentionObligatoire"))}}}function openCessationActivite(){var a=$(pcDpil+"idCessationActivite").value;if(a==="true"){effect.tweenShowInline($(pcDpil+"DateCessationActivite"))}else{effect.tweenHide($(pcDpil+"DateCessationActivite"))}}function openConjointEntreprise(){var a=$(pcDpil+"idConjointChefEntreprise").value;if(a==="true"){effect.tweenShowInline($(pcDpil+"DetailConjointChefEntreprise"))}else{effect.tweenHide($(pcDpil+"DetailConjointChefEntreprise"))}}function openDateCessationActivite(){var a=$(pcDpil+"idConjointCessationActivite").value;if(a==="true"){effect.tweenShowInline($(pcDpil+"ConjointDateCessationActivite"))}else{effect.tweenHide($(pcDpil+"ConjointDateCessationActivite"))}}function openDetailRepriseConjoint(){var a=$(pcDpil+"idConjointRepriseActivite").value;if(a==="true"){effect.tweenShowInline($(pcDpil+"DetailRepriseConjoint"))}else{effect.tweenHide($(pcDpil+"DetailRepriseConjoint"))}}function disabledConjointReprise(){var a=$(pcDpil+"idConjointCessationActivite").value;if(a==="true"){$("switchcheckboxconjointreprise").disabled=true;$(pcDpil+"ConjointRepriseActivite").addClass("disabled");$("switchconjointreprise").addClass("disabled")}else{$("switchcheckboxconjointreprise").disabled=false;$(pcDpil+"ConjointRepriseActivite").removeClass("disabled");$("switchconjointreprise").removeClass("disabled")}}function disabledConjointCessationActivite(){var a=$(pcDpil+"idConjointRepriseActivite").value;if(a==="true"){$("switchcheckboxconjointcessation").disabled=true;$(pcDpil+"ConjointCessationActivite").addClass("disabled");$("switchconjointcessation").addClass("disabled")}else{$("switchcheckboxconjointcessation").disabled=false;$(pcDpil+"ConjointCessationActivite").removeClass("disabled");$("switchconjointcessation").removeClass("disabled")}}function boutonDisabledSituationProfessionelle(){var a=false;if($(pcDpil+"activiteSalariee").checked||$(pcDpil+"activiteNonSalariee").checked||$(pcDpil+"chomageIndemnise").checked||$(pcDpil+"precision").checked){if($(pcDpil+"activiteSalariee").checked){if(!allCoupleEmployeurPeriodeComplet()||!coupleEmployeurPeriodeComplet(0)){a=true}}if($(pcDpil+"activiteNonSalariee").checked){if(!controleActiviteNonSalariee()){a=true}}if($(pcDpil+"precision").checked){if(!presicionAutreObligatoire()){a=true}}}else{a=true}if(a){$(pcDpil+"validerSituationProfessionelle").disabled=true}else{$(pcDpil+"validerSituationProfessionelle").disabled=false}}function controleActiviteNonSalariee(){if(!isNotChampVide($(pcDpil+"idActiviteExercee"))||!isNotChampVide($(pcDpil+"idAdresseActivite"))||!isTailleChampOK($(pcDpil+"idActiviteExercee"),100)||!isTailleChampOK($(pcDpil+"idAdresseActivite"),100)){return false}if($(pcDpil+"idCessationActivite").value==="true"){if(!controleDateObligatoire("idDateCessationActivite","","")||!controleDateJour("idDateCessationActivite")){return false}}if($(pcDpil+"idConjointChefEntreprise").value==="true"){if(!isNotChampVide($(pcDpil+"idConjointActiviteExercee"))||!isTailleChampOK($(pcDpil+"idConjointActiviteExercee"),100)){return false}if($(pcDpil+"idConjointCessationActivite").value==="true"&&$(pcDpil+"idConjointRepriseActivite").value==="true"){return false}if($(pcDpil+"idConjointCessationActivite").value==="true"&&(!controleDateObligatoire("idConjointDateCessationActivite","","")||!controleDateJour("idConjointDateCessationActivite"))){return false}if($(pcDpil+"idConjointRepriseActivite").value==="true"){if(!isNotChampVide($(pcDpil+"idConjointNatureRepriseActivite"))||!isTailleChampOK($(pcDpil+"idConjointNatureRepriseActivite"),100)){return false}else{if(!controleDateObligatoire("idConjointDateRepriseActivite","","")||!controleDateJour("idConjointDateRepriseActivite")){return false}}}}return true}function presicionAutreObligatoire(){var a=false;if($(pcDpil+"idPrecision").value.trim().length>0&&isTailleChampOK($(pcDpil+"idPrecision"),100)){a=true}return a}function coupleEmployeurPeriodeComplet(a){if(controleTailleChampNomEmployeur(a)&&controleTailleChampAdresseEmployeur(a)&&controleDateObligatoire("idDateActivite",a,"Debut")){if(controleDateObligatoire("idDateActivite",a,"Fin")){return controleOrdreDate("idDateActivite",a)}return true}return false}function allCoupleEmployeurPeriodeComplet(){var a=nbMaxEmployeur;for(i=0;i<=a;i++){if(!coupleEmployeurPeriodeComplet(i)){return false}}return true}function controleTailleChampNomEmployeur(a){return isNotChampVide($(pcDpil+"idNomEmployeur"+a))&&isTailleChampOK($(pcDpil+"idNomEmployeur"+a),150)}function controleTailleChampAdresseEmployeur(a){return isNotChampVide($(pcDpil+"idAdresse"+a))&&isTailleChampOK($(pcDpil+"idAdresse"+a),150)}function controleDateObligatoire(c,b,a){return isNotChampVide($(pcDpil+c+a+b))}function controleOrdreDate(c,b){var a=process($(pcDpil+c+"Debut"+b).value);var d=process($(pcDpil+c+"Fin"+b).value);return a<=d}function process(a){var b=a.split("/");return new Date(b[2],b[1]-1,b[0])}function controleDateJour(b){if(controleDateObligatoire(b,"","")){var c=process($(pcDpil+b).value);var a=new Date();return c<=a}return true}function cleanDate(b,a){if(!(b.event.inputType==="deleteContentBackward"||b.event.inputType==="deleteContentForkward")){a.value=""}}function updateDatesSituationProfessionnelle(e,a,d){var f=$(pcDpil+e+d);var c=$(pcDpil+e+d);var b=$(pcDpil+a+d);if(!controleDateObligatoire(e,d,"Debut")){updateErrorStatus($(pcDpil+e+"Debut"+d),$(pcDpil+a+d),msgErreurDateVide,false)}else{if(controleDateObligatoire(e,d,"Fin")&&!controleOrdreDate(e,d)){updateErrorStatus($(pcDpil+e+"Fin"+d),$(pcDpil+a+d),msgErreurDateSup,false);updateErrorStatus($(pcDpil+e+"Debut"+d),$(pcDpil+a+d),msgErreurDateSup,false)}else{updateErrorStatus($(pcDpil+e+"Debut"+d),$(pcDpil+a+d),"",true);updateErrorStatus($(pcDpil+e+"Fin"+d),$(pcDpil+a+d),"",true)}}}function showPcMentionObligatoire(){if($(pcDpil+"accidentTiers").checked){return true}if($(pcDpil+"regimes").checked){return true}if($(pcDpil+"pays").checked){return true}if($(pcDpil+"aucunePrestationComplementaire").checked){return false}return false}function showHideMentionObligatoire(){if(showPcMentionObligatoire()){effect.tweenShowInline($("idMentionObligatoire"))}else{effect.tweenHide($("idMentionObligatoire"))}}function showHideTab(a,b){if(b){effect.tweenShowInline(a)}else{effect.tweenHide(a)}}function openCloseAccidentTiers(){showHideTab($("idAccidentTiers"),$(pcDpil+"accidentTiers").checked);showHideMentionObligatoire()}function validateDateAccident(){updateErrorStatus($(pcDpil+"idDateAccidentTiers"),$(pcDpil+"idErreurDateAccidentTiers"),erreurDateVideMsg,isNotChampVide($(pcDpil+"idDateAccidentTiers")))}function isAccidentTiersComplete(){return isNotChampVide($(pcDpil+"idDateAccidentTiers"))}function openCloseRegimes(){showHideTab($("idRegimes"),$(pcDpil+"regimes").checked);showHideMentionObligatoire()}function isRegimeComplete(a,b){if($(pcDpil+"detailRegime"+a).checked){return isNotChampVide($(pcDpil+"idNomOrganisme"+a))&&isTailleChampOK($(pcDpil+"idNomOrganisme"+a),b)&&isNotChampVide($(pcDpil+"idAdresseOrganisme"+a))&&isTailleChampOK($(pcDpil+"idAdresseOrganisme"+a),b)}return true}function areAllRegimesComplete(d,c){var a=true;var b=0;while(a&&b<d){a=isRegimeComplete(b,c);b++}return a}function isAtLeastOneRegimeSelected(c){var a=false;var b=0;while(!a&&b<c){a=$(pcDpil+"detailRegime"+b).checked;b++}return a}function isRegimesComplete(b,a){return isAtLeastOneRegimeSelected(b)&&areAllRegimesComplete(b,a)}function validateNomOrganisme(a,b){validateTailleMinMaxChampTexte($(pcDpil+"idNomOrganisme"+a),$(pcDpil+"idErreurNomOrganisme"+a),b)}function validateAdresseOrganisme(a,b){validateTailleMinMaxChampTexte($(pcDpil+"idAdresseOrganisme"+a),$(pcDpil+"idErreurAdresseOrganisme"+a),b)}function openCloseDetailRegime(a){showHideTab($("idDetailRegime"+a),$(pcDpil+"detailRegime"+a).checked)}function openClosePays(){showHideTab($("idPays"),$(pcDpil+"pays").checked);showHideMentionObligatoire()}function validateNomPays(a,b){if(!isPaysVide(a)){validateTailleMinMaxChampTexte($(pcDpil+"idNomPays"+a),$(pcDpil+"idErreurNomPays"+a),b)}}function validateDatesPays(c){var d=$(pcDpil+"idDatePaysDebut"+c);var b=$(pcDpil+"idDatePaysFin"+c);var a=$(pcDpil+"idErreurDatePays"+c);if(!controleDateObligatoire("idDatePays",c,"Debut")){d.addClass("field_error");effect.tweenShow(a);a.textContent=msgErreurDateIncomplete;return}if(!controleDateObligatoire("idDatePays",c,"Fin")){b.addClass("field_error");effect.tweenShow(a);a.textContent=msgErreurDateIncomplete;return}if(!controleOrdreDate("idDatePays",c)){d.addClass("field_error");b.addClass("field_error");effect.tweenShow(a);a.textContent=msgErreurDateSup;return}d.removeClass("field_error");b.removeClass("field_error");effect.tweenHide(a);a.textContent="";return}function openPays(){for(i=1;i<=nbMaxPays;i++){if($("idPays"+i).hasClass("hidden")){effect.tweenShowInline($("idPays"+i));$("ajoutPays"+(i-1)).addClass("hidden");break}}}function afficheBtnAjouterPays(){for(i=0;i<=nbMaxPays;i++){if(i===nbMaxPays){$("ajoutPays"+i).addClass("hidden")}else{if(!$("idPays"+i).hasClass("hidden")&&!$("idPays"+(i+1)).hasClass("hidden")){$("ajoutPays"+i).addClass("hidden")}}}}function closePays(a){var b=0;for(j=1;j<=nbMaxPays;j++){if(!$("idPays"+j).hasClass("hidden")){b++}}while(a<=b){if(a!==b){$(pcDpil+"idNomPays"+a).value=$(pcDpil+"idNomPays"+(a+1)).value;$(pcDpil+"idDatePaysDebut"+a).value=$(pcDpil+"idDatePaysDebut"+(a+1)).value;$(pcDpil+"idDatePaysFin"+a).value=$(pcDpil+"idDatePaysFin"+(a+1)).value}else{$(pcDpil+"idNomPays"+a).value="";$(pcDpil+"idDatePaysDebut"+a).value="";$(pcDpil+"idDatePaysFin"+a).value="";effect.tweenHide($("idPays"+a));$("ajoutPays"+(a-1)).classList.remove("hidden")}a++}}function isPaysVide(c){var d=isNotChampVide($(pcDpil+"idNomPays"+c));var b=isNotChampVide($(pcDpil+"idDatePaysDebut"+c));var a=isNotChampVide($(pcDpil+"idDatePaysFin"+c));return !d&&!b&&!a}function isPaysComplete(d,e){if($("idPays"+d).hasClass("hidden")){return true}else{if(isPaysVide(d)){return true}else{var f=isNotChampVide($(pcDpil+"idNomPays"+d));var a=isTailleChampOK($(pcDpil+"idNomPays"+d),e);var c=isNotChampVide($(pcDpil+"idDatePaysDebut"+d));var b=isNotChampVide($(pcDpil+"idDatePaysFin"+d));var g=controleOrdreDate("idDatePays",d);return f&&a&&c&&b&&g}}}function onePaysComplete(){if(!isPaysVide(0)){return true}return false}function areAllPaysVisiblesComplete(a,b){for(i=0;i<a;i++){if(!isPaysComplete(i,b)){return false}}return true}function uncheckAucunePrestation(){if($(pcDpil+"aucunePrestationComplementaire").checked){$(pcDpil+"aucunePrestationComplementaire").checked=false}}function uncheckOthers(){if($(pcDpil+"aucunePrestationComplementaire").checked){if($(pcDpil+"accidentTiers").checked){$(pcDpil+"accidentTiers").checked=false;openCloseAccidentTiers()}if($(pcDpil+"regimes").checked){$(pcDpil+"regimes").checked=false;openCloseRegimes()}if($(pcDpil+"pays").checked){$(pcDpil+"pays").checked=false;openClosePays()}}}function boutonDisabledPrestationsComplementaires(e,a,c){var b;if($(pcDpil+"aucunePrestationComplementaire").checked){b=!$(pcDpil+"accidentTiers").checked&&!$(pcDpil+"regimes").checked&&!$(pcDpil+"pays").checked}else{if(!$(pcDpil+"accidentTiers").checked&&!$(pcDpil+"regimes").checked&&!$(pcDpil+"pays").checked){b=false}else{var f=true;if($(pcDpil+"accidentTiers").checked){f=isAccidentTiersComplete()}var d=true;if($(pcDpil+"regimes").checked){d=isRegimesComplete(e,c)}var g=true;if($(pcDpil+"pays").checked){g=onePaysComplete()&&areAllPaysVisiblesComplete(a,c)}b=f&&d&&g}}$(pcDpil+"validerPrestationsComplementaires").disabled=!b}function boutonDisabledPj(){var b=false;var a=$(pcDpil+"idFichier");if(a.value==""||!afficherSuiteUpload()){b=true}else{if(!$(pcDpil+"attesterHonneur").checked){b=true}}$(pcDpil+"validerPJ").disabled=b};