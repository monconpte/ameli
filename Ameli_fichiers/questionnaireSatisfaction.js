function ajaxCallRemoteMesureSatiAction(c,d,a){if(a==null){a=""}var f="/PortailAS/mesureSatisfaction.do?method="+c+"&idNoCache="+new Date().getTime();var b=document.getElementById("emplacementQuestionnaire").value;var h=document.getElementById("typeQuestionnaire").value;var g=document.getElementById("divQuestSati_ZoneTexteLibre"+a).name;var e=document.getElementById("divQuestSati_ZoneTexteLibre"+a).value.replace(/\n/g,"\r\n");if(window.XMLHttpRequest){reqEmoticone=new XMLHttpRequest();reqEmoticone.onreadystatechange=function(){processStateChange(a)};reqEmoticone.open("GET",f,true);testEtAffecteAttributsRequete(reqEmoticone,d,b,h,g,e);reqEmoticone.send(null)}else{if(window.ActiveXObject){reqEmoticone=new ActiveXObject("Microsoft.XMLHTTP");reqEmoticone.onreadystatechange=function(){processStateChange(a)};reqEmoticone.open("GET",f,true);testEtAffecteAttributsRequete(reqEmoticone,d,b,h,g,e);reqEmoticone.send()}else{return}}}function processStateChange(a){if(reqEmoticone.readyState==4){if(reqEmoticone.status==200){if(reqEmoticone.responseText.contains("montrerInit;")){var d=document.getElementsByName("radioGroupePrecisions");for(var b=0;b<d.length;b++){d[b].checked=false}initialiserQuestionnaireSatisfaction(reqEmoticone.responseText,a)}if(reqEmoticone.responseText.contains("montrerMerci;")){afficherMerci(a)}if(reqEmoticone.responseText.contains("montrerPrecisions;")){afficherPrecisions(a)}}else{var c=document.getElementById("divQuestSati_ErreurAucuneSelection"+a);c.style.display=""}}}function testEtAffecteAttributsRequete(b,f,a,e,d,c){if(b==null){return}if(f!=null){b.setRequestHeader("etatSatisfaction",f)}if(a!=null){b.setRequestHeader("emplacementQuestionnaire",a)}if(e!=null){b.setRequestHeader("typeQuestionnaire",e)}if(d!=null){b.setRequestHeader("etatZoneTexte",d)}if(c!=null){b.setRequestHeader("zoneTexte",encodeURIComponent(c))}}function remercier(a,b){if(a!=""){document.getElementById("divQuestSati_Valider"+b).disabled=true}ajaxCallRemoteMesureSatiAction("remercier",a,b)}function choisirCauseInsatisfaction(d,a){var e=d.split(",");var g=e[1];var b=(document.getElementById("divQuestSati_QuestionLibre"+a).dataset.ref).split(",");var c=b[0];var f=document.getElementById("divQuestSati_Valider"+a);if(f!=null){f.name=d}else{}if(c==g){document.getElementById("divQuestSati_ZoneTexte"+a).setAttribute("style","display:")}else{document.getElementById("divQuestSati_ZoneTexte"+a).setAttribute("style","display:none")}}function afficherPrecisions(a){var b=a;document.getElementById("divQuestSati_ChoixOuv"+b).setAttribute("style","display:none");document.getElementById("divQuestSati_ChoixPre"+b).setAttribute("style","display:");document.getElementById("divQuestSati_Merci"+b).setAttribute("style","display:none")}function afficherMerci(a){var d=a;document.getElementById("divQuestSati_ChoixOuv"+d).setAttribute("style","display:none");document.getElementById("divQuestSati_ChoixPre"+d).setAttribute("style","display:none");document.getElementById("divQuestSati_Merci"+d).setAttribute("style","display:");var c=document.getElementById("timeOutQuestionnaire").value;var b=parseFloat(c)+parseFloat(1000);setTimeout(function(){document.getElementById("questionnaireSatisfaction"+d).setAttribute("style","opacity:0")},c);setTimeout(function(){viderQuestionnaire(a)},b)}function viderQuestionnaire(a){var c=a;var b=document.getElementById("questionnaireSatisfaction"+c);while(b.firstChild){b.removeChild(b.firstChild)}}function initialiserQuestionnaireSatisfaction(e,b){var f="divQuestSati_ChoixOuv";var h=f+"_ImgSati"+b;var g=f+"_ImgInsati"+b;var a=f+"_TxtSati"+b;var c=f+"_TxtInsati"+b;var i=":-:";document.getElementById("divQuestionnaire_rubrique").setAttribute("style","display:");document.getElementById("divQuestSati_Valider"+b).disabled=false;var d=e.split(";");d.each(function(m,l){var k=m.split(i);var j=k[0];var p=k[1];var o=k[2];var n=k[3];switch(j){case h:document.getElementById(h).style.display="";document.getElementById(h).name=n;break;case g:document.getElementById(g).style.display=o;document.getElementById(g).name=n;break;case a:affecterValeurDiv(a,p,"",n);break;case c:affecterValeurDiv(c,p,"",n);break;default:affecterValeurDiv(j,p,o,n)}})}function affecterValeurDiv(d,b,a,e){var c="divQuestSati_Precision";var g=document.getElementById(d);if(g!=null){if(d.contains(c)){var f=document.getElementById(d+"_label");f.innerHTML=b+"</br>";f.setAttribute("style","display:"+a);g.value=e}else{if(!b.contains("null")){g.innerHTML=b;g.name=e;if(d.contains("divQuestSati_QuestionLibre")){g.dataset.ref=e}}}g.setAttribute("style","display:"+a)}else{}};